<!DOCTYPE html>
<html>
<head>
<!-- Article ID: 25 - Extracted from develop-1993 -->
<!-- on 2024-02-03 by Giorgio Ferrara - giorgio<dot>ferrara<at>gmail<dot>com -->
<!-- The content is protected by the copyright of its respective owners -->
<title>June 93 - MAKING BETTER QUICKTIME MOVIES</title>
<link href="../common/styles/main.css" rel="stylesheet" type="text/css">
</head>
<body>
<h2>MAKING BETTER QUICKTIME MOVIES</h2>
<h1>KIP OLSON</h1>
<p>
<img src="img/189.gif" width="128 px"></img>
</p>
<p>
<i>&nbsp;QuickTime 1.5 makes it easier than ever to make CD-playable movies. These tips on</i><br>
<i>capturing, compressing, and playing back movies will help you use the new Apple</i><br>
<i>Compact Video compressor to its best advantage, creating movies that will play well off</i><br>
<i>a standard CD-ROM drive on a Macintosh LC computer.</i>
</p>
<p class="spacer">&nbsp;</p>
<p>
&nbsp;QuickTime introduced the world of digital video to the Macintosh and enabled a whole<br>
new category of multimedia content: movies. With QuickTime, it's simple to play back<br>
movies in any application and to exchange movies between applications using the<br>
standard cut/copy/paste mechanism. But no one ever said it was going to be easy to<br>
create them! 
</p>
<p>
&nbsp;What makes movie creation tricky is the tradeoffs required to get QuickTime movies<br>
to play off a CD-ROM drive, the most effective distribution medium for digital video.<br>
Uncompressed, full-screen, full-motion video requires a data transfer rate of about<br>
27,000 kilobytes/second, yet a typical CD- ROM drive has a data transfer rate of only<br>
100 kilobytes/second. QuickTime solves this problem by using video compression,<br>
which requires you to make tradeoffs between frame size, frame rate, image quality,<br>
and sound quality when making a movie.
</p>
<p>
&nbsp;The tips in this article will help you make the right tradeoffs to produce high-quality<br>
movies that will play off CD-ROM. You'll also find tips on capturing digital video,<br>
using the MovieShop utility on this issue's CD to produce compressed movies, and<br>
playing back what you've created. I assume you're already familiar with the basics of<br>
movie making with QuickTime. 
</p>
<h2>TIPS ON TRADEOFFS</h2>
<p>
Making the right tradeoffs is the key to producing better QuickTime movies. Depending<br>
on your target platform, to get smooth playback you may need to limit the frame size<br>
and rate, minimize the differences between frames, and trade off audio for video<br>
quality. 
</p>
<p>
<b>&nbsp;PLATFORM</b><br>
Before you get started, you need to decide which Macintosh platform your movie will<br>
play on.&nbsp;&nbsp;&nbsp;Obviously, a Macintosh Quadra 950 with a double-speed CD-ROM drive can<br>
play much larger, higher-quality movies than a Macintosh LC with a standard CD<br>
drive. Table 1 shows some common platforms and their capabilities. (See the following<br>
sections for more on frame size and rate.)
</p>
<p>
<b>Table 1</b>
</p>
<p>
Common QuickTime Platforms
</p>
<p>
<b>Macintosh</b>
</p>
<b><ul><li>Bits/Pixel</li>
<li>Built in CD Drive</li>
<li>Maximum Movie Frame Size, Rate</li>
<li>Market</li></ul></b>
<p>
Quadra 950
</p>
<ul>
<li>1, 4, 8, 16, 24</li>
<li>Optional</li>
<li>320 x 240, 24 fps</li>
<li>Power user, professional</li>
</ul>
<p>
Performa 600
</p>
<ul>
<li>1, 4, 8, 16</li>
<li>Optional</li>
<li>320 x 240, 15 fps</li>
<li>Consumer, home</li>
</ul>
<p>
LC II
</p>
<ul>
<li>1, 4, 8, 16</li>
<li>No</li>
<li>240 x 180, 12 fps</li>
<li>Education</li>
</ul>
<p>
Macintosh II
</p>
<ul>
<li>Card-dependent</li>
<li>No</li>
<li>160 x 120, 15 fps</li>
<li>Loyal customers</li>
</ul>
<p>
For the purposes of this article, our target platform is the Macintosh LC II with an<br>
AppleCD SC CD-ROM drive (transfer rate of 100 kilobytes/second). Movies created<br>
for this platform should play back well on virtually every color Macintosh, covering<br>
as much of the installed base as possible.&nbsp;&nbsp;&nbsp;However, keep in mind that machines that<br>
use NuBus video, such as the Macintosh II, won't have the playback performance of the<br>
LC II. You should always test your movies on the platforms they'll play on.
</p>
<p>
<b>FRAME SIZE</b><br>
The frame size determines how large the movie will be on the screen. The larger the<br>
frame size, the greater the number of pixels that have to be updated every frame. This<br>
can be a problem for less powerful machines, so you often need to limit the frame size<br>
to get smooth playback.
</p>
<p>
Frame sizes are typically specified by horizontal and vertical pixel measurements.<br>
Some common frame sizes for digital video are shown in Table 2.
</p>
<p class="spacer">&nbsp;</p>
<p>
<b>Table 2 </b>Common Frame Sizes for Digital Video
</p>
<p><table border="0"><tr><td><b>Frame Size</b></td><td><b></b><b>Description</b></td><td><b></b><b>Pixels/Frame</b></td><td><b></b><b>Capability Required</b></td></tr>
<tr><td>640 x 480</td><td>Full-screen</td><td>307,200</td><td>Hardware acceleration</td></tr>
<tr><td>320 x 240</td><td>Quarter-screen</td><td>76,800</td><td>Fast CPU like a Macintosh</td></tr>
<tr><td></td><td></td><td></td><td>Quadra</td></tr>
<tr><td>240 x 180</td><td>Eighth-screen</td><td>43,200</td><td>Apple Compact Video</td></tr>
<tr><td></td><td></td><td></td><td>compressor</td></tr>
<tr><td>160 x 120</td><td>Sixteenth-screen</td><td>19,200</td><td>Apple Video compressor</td></tr></table></p>
<p class="spacer">&nbsp;</p>
<p class="spacer">&nbsp;</p>
<p class="spacer">&nbsp;</p>
<p>
Note that full-screen movies are practical only with hardware acceleration, and for<br>
quarter-screen movies you need a fast CPU like a Macintosh Quadra. With our LC II<br>
platform and the Apple Compact Video compressor made available by QuickTime 1.5,<br>
we can create eighth-screen movies, which have more than twice the screen area of<br>
the "postage-stamp movies" possible with QuickTime 1.0's Apple Video compressor.
</p>
<p>
For the Apple Compact Video compressor to function optimally, the frame size should<br>
be a multiple of 4 in each dimension. This is because the compression algorithm uses a<br>
4-pixel by 4-pixel cell. 
</p>
<p>
<b>FRAME RATE</b><br>
The<i> frame rate</i>is the number of frames displayed in each second of the movie, typically<br>
described in frames per second (fps). The frame rate to use for a movie depends on the<br>
frame rate of the source material, whether film or videotape. For the smoothest<br>
results, you should use a frame rate of which the source material frame rate is a<br>
multiple, but this may only be possible if you have hardware acceleration or a fast<br>
CPU. Still, an acceptable compromise is available if your platform is limited. 
</p>
<p>
The frame rate of source material in the NTSC video format is approximately 30 fps.<br>
Much source material is shot using film at 24 fps and then transferred onto videotape.<br>
Frame rates to use for movies based on these types of source material are shown in<br>
Table 3. Other video standards such as PAL and SECAM have different frame rates; if<br>
your movie is based on one of these types of source material, you'll have to compensate<br>
accordingly. For our target platform, we can use 12 fps with good results. 
</p>
<p>
<b>&nbsp;Table 3</b><br>
Common Frame Rates for Digital Video
</p>
<p>
<b>&nbsp;If Your Source Material Is NTSC Video:</b>
</p>
<p><table border="0"><tr><td><b>Frame Rate</b></td><td><b></b><b>Description</b></td><td><b></b><b>Capability Required</b></td></tr>
<tr><td>30 fps</td><td>Full-motion</td><td>Hardware acceleration</td></tr>
<tr><td>15 fps</td><td>Half-motion</td><td>Fast CPU like a Macintosh Quadra</td></tr>
<tr><td>12 fps</td><td>Half-film rate</td><td>Apple Compact Video compressor</td></tr>
<tr><td>10 fps</td><td>Third-motion</td><td>Apple Video compressor</td></tr></table></p>
<p class="spacer">&nbsp;</p>
<p class="spacer">&nbsp;</p>
<p>
<b>&nbsp;If Your Source Material Is Film:</b>
</p>
<p><table border="0"><tr><td><b>Frame Rate</b></td><td><b></b><b>Description</b></td><td><b></b><b>Capability Required</b></td></tr>
<tr><td>24 fps</td><td>Full-motion</td><td>Hardware acceleration</td></tr>
<tr><td>12 fps</td><td>Half-motion</td><td>Apple Compact Video compressor</td></tr>
<tr><td>10 fps</td><td>Third-video</td><td>rate Apple Video compressor</td></tr></table></p>
<p class="spacer">&nbsp;</p>
<p class="spacer">&nbsp;</p>
<p>
&nbsp;There are a couple of minor quirks having to do with frame rate that you should be<br>
aware of when you make a movie. First, you'll note that I said the NTSC frame rate<br>
is<i>approximately</i> 30 fps. For reasons lost in the dawn of television, the NTSC frame<br>
rate is actually 29.97 fps. If you assume the frame rate is 30 fps, long movies can<br>
lose synchronization between sound and video over time, since there are fewer video<br>
frames than expected. For example, if you digitized 100 seconds of video, you would<br>
expect to get 3000 frames, but you would really only get 2997 frames in that period<br>
of time.&nbsp;&nbsp;&nbsp;The GrabGuy utility and the HyperCard&#174; Movie Making Stack (found on<br>
the<i>QuickTime 1.5 Developer CD</i>and on this issue's CD) automatically take care of this<br>
problem, but if you find sound sync drifting over time on long movies, you may need to<br>
duplicate a video frame every 1000 frames to get things back in sync. 
</p>
<p>
&nbsp;The second item to note involves transferring 24-fps film to 30-fps video. On<br>
videotape, each frame is composed of two fields, one containing the odd scan lines and<br>
the other containing the even scan lines. These fields are interlaced to produce the<br>
frame. When film is transferred to video, six extra frames are "made up" every<br>
second. Typically, once every four frames, two adjacent film frames are put into the<br>
two fields of a single video frame to form a fifth frame. Figure 1 shows how this<br>
works.&nbsp;&nbsp;&nbsp;These made-up frames have a blurred look when digitized. 
</p>
<p>
<img src="img/190.gif" width="600 px"></img>
</p>
<p>
<b>&nbsp;Figure 1</b> Making Up Extra Frames When Film Is Transferred to Video
</p>
<p class="spacer">&nbsp;</p>
<p>
&nbsp;You can use a couple of different methods to digitize only the original film frames and<br>
skip the blurry made-up frames. If you have a capture system that can grab individual<br>
video fields, you can set it to capture at 12 fps, and it will skip the duplicate fields and<br>
give the original 12 film frames each second.&nbsp;&nbsp;&nbsp;Or simply capture at 30 fps and throw<br>
away every fifth frame, yielding the original 24 film frames. 
</p>
<p>
<b>&nbsp;FRAME DIFFERENCING</b><br>
<i>&nbsp;Frame differencing</i>is the technique used by QuickTime of storing and updating only the<br>
pixels that differ from the previous frame, so that much less data has to be stored and<br>
displayed. For example, in Figure 2 the frame on the right contains only the<br>
information needed to update the areas of the screen that differ from the frame on the<br>
left. As a consequence, less data has to be stored on disc for the second frame and it<br>
takes less time to draw. This in turn allows larger frame sizes and frame rates, giving<br>
better-quality movies.
</p>
<p>
<img src="img/191.gif" width="561 px"></img>
</p>
<p>
<b>&nbsp;Figure 2</b> Example of Frame Differencing
</p>
<p>
When you're using the Apple Compact Video compressor, it's a good idea to create<br>
movies in which not much changes from one frame to the next, since frame<br>
differencing is one way the compressor achieves lower data transfer rates. Here are<br>
some things to keep in mind to get the most benefit from frame differencing:
</p>
<ul>
<li>When possible, use source material with constant backgrounds and solid<br>
colors -- especially all-black and all-white areas -- to reduce the difference<br>
between frames.</li>
<li>When possible, use videos of "talking heads." These are great candidates<br>
for frame differencing, since typically only the lips and head move. </li>
<li>Avoid videos with lots of panning and zooming or with complex<br>
backgrounds.&nbsp;&nbsp;&nbsp;These effects increase the difference between frames and thus<br>
decrease the possibility of compression gains. </li>
<li>Avoid source material with a lot of video noise, as this increases the<br>
difference between frames. </li>
</ul>
<p>
Frames can't be differenced indefinitely, however. At regular intervals a<i>key frame</i>--<br>
a frame that refreshes the entire movie area, not just the pixels that differ from the<br>
previous frame -- is inserted. You can adjust the interval to achieve the tradeoff<br>
between data rate and movie quality that you desire. Normally, you should have one key<br>
frame per second. The more you put in, the higher the data rate and the better your<br>
movie looks but the less compression gain you get from frame differencing. 
</p>
<p>
<b>SOUND SAMPLING RATE</b><br>
The standard Macintosh sound rate is 22.254 kHz, so you'll get the highest-quality<br>
audio by sampling to this rate. The Sound Manager is also more efficient at this native<br>
rate, so the movie will play back better. However, because your data transfer rate off<br>
CD-ROM is limited, using higher audio rates will decrease the quality of the video. The<br>
same constraint applies to stereo and 16-bit sound, both of which are supported by<br>
QuickTime: these formats eat up more bandwidth, so the video quality may suffer. 
</p>
<p>
If your source is mostly people talking and not music, you can record audio at the<br>
alternate sampling rate of 11.127 kHz. In many cases this will make your video look<br>
sharper and give acceptable sound quality. 
</p>
<p>
With most audio sampling hardware, it's best to set the hardware at the sampling rate<br>
you desire, since the hardware will often do filtering to avoid aliasing artifacts. One<br>
exception is the MacRecorder digitizer (from MacroMedia), which doesn't filter at<br>
11.127 kHz. If possible, you should record at 22.254 kHz on a MacRecorder and<br>
downsample the audio to 11.127 kHz when you compress the movie.&nbsp;&nbsp;One other thing to<br>
keep in mind when using a MacRecorder to digitize audio at 22.254 kHz is that its<br>
sample rate tends to drift away from the standard Macintosh rate, so you should always<br>
resample it to 22.254 kHz or 11.127 kHz when you compress the movie. 
</p>
<h2>TIPS ON CAPTURING</h2>
<p>
The<i> QuickTime 1.5 Developer CD</i>and this issue's CD contain two utilities for capturing<br>
video: GrabGuy and the HyperCard Movie Making Stack. GrabGuy is an application that<br>
does a multipass grab off a controllable VCR like the Sony &#181;Matic, giving<br>
frame-accurate recording. HyperCard and the Movie Making Stack enable you to get<br>
frame-accurate grabs off controllable Pioneer laser discs.&nbsp;&nbsp;&nbsp;Most video cards also come<br>
with software that enables you to grab raw video directly to RAM or hard disk. 
</p>
<p>
To get the highest possible quality when you're capturing the source material, you<br>
should do three things:
</p>
<ul>
<li>Start with a clean source. </li>
<li>Adjust black, white, brightness, and contrast levels. </li>
<li>Grab at a larger size than you need and scale down when you compress. </li>
</ul>
<p>
I'll discuss these tips one at a time. 
</p>
<p>
<b>START WITH A CLEAN SOURCE</b><br>
The less video noise, the better compression and the more benefit from frame<br>
differencing you'll get, so you should digitize from the cleanest, highest-quality video<br>
source possible. The most common video formats, in decreasing order of quality, are<br>
BetaCam, &#181;Matic/S-VHS/Hi8, laser disc, and VHS. 
</p>
<p>
Beware of tapes that have been duplicated many times or played a lot -- they can be<br>
very noisy. If your digitizing card supports S-Video inputs, use them if you can, as<br>
S-Video delivers better quality than composite video. 
</p>
<p>
<b>ADJUST LEVELS</b><br>
Many digitizing cards support one or more settings with regard to black level, white<br>
level, brightness, and contrast. To enhance compression gains from frame<br>
differencing, you should adjust the black level of your card so that black areas in your<br>
source digitize as truly black pixels. A frame with truly black pixels differs much less<br>
from the original than the same frame with noisy black pixels. Thus, refreshing the<br>
screen with the noisy frame takes more data than refreshing the screen with the clean<br>
frame. Often what looks like black is quite noisy, so you should experiment with your<br>
video card.&nbsp;&nbsp;&nbsp;The same rule applies to white levels.
</p>
<p>
<b>GRAB AT A LARGER SIZE THAN YOU NEED</b><br>
Because many video cards do a poor job of scaling down frames when they grab, it's<br>
best to capture at a large size and let QuickDraw do a filtered scale when you compress.<br>
If you're using GrabGuy you don't need to worry, because it will grab 320 x 240 fields<br>
and use QuickDraw to scale them down. If you're grabbing from laser disc, grab frames<br>
at 640 x 480 and scale them down at compression time. 
</p>
<p>
To save disc space, you should grab using JPEG compression set to the highest quality<br>
instead of grabbing raw frames. Most of the quality you might lose this way isn't used<br>
by the Apple Compact Video compressor anyway, so this won't reduce the quality of<br>
your final movie very much. A number of video cards now support hardware JPEG<br>
compression, which makes this even easier. 
</p>
<h2>TIPS ON COMPRESSING</h2>
<p>
The MovieShop utility on this issue's CD is indispensable for compressing QuickTime<br>
movies. After an admonition to edit before compressing, I'll take you through the steps<br>
involved in using MovieShop to create CD-playable movies. My emphasis here is more<br>
on what to do than why you're doing it. If you're curious about the reasons you go<br>
through the steps you do, refer to the MovieShop documentation on the CD. 
</p>
<p>
<b>EDIT BEFORE COMPRESSING</b><br>
To achieve the best possible playback performance with the smallest amount of<br>
memory, you should completely edit your movie in raw form before compressing with<br>
MovieShop. By the same token, it's not a good idea to compress the movie in pieces and<br>
then cut and paste the pieces together to form the final movie, as this will require<br>
extra input/output buffers and may cause QuickTime to run out of memory. If this<br>
happens, movie playback will slow down considerably. 
</p>
<p>
&nbsp;Here's why: Movies are composed of tracks that typically contain video and sound data.<br>
When you capture a movie, the track data is often stored sequentially in the file,<br>
resulting in a file layout like the first one shown in Figure 3. To play this movie,<br>
QuickTime must allocate four large buffers -- one for each track -- and seek between<br>
tracks during playback. This can cause miserable playback performance off CD-ROM<br>
drives, which typically have very slow seek times (we're talking hundreds of<br>
milliseconds). 
</p>
<p>
<img src="img/192.gif" width="546 px"></img>
</p>
<p>
<b>Figure 3</b> Ways of Storing Video and Sound Track Data in a Movie
</p>
<p class="spacer">&nbsp;</p>
<p>
&nbsp;To solve this problem, QuickTime enables you to interleave the video and sound<br>
tracks, resulting in a file layout like the second one shown in Figure 3. Because the<br>
sound and video track data are now close to each other in the file, seeking is minimized<br>
and only two buffers are needed for data transfer.&nbsp;&nbsp;&nbsp;This is often the file layout you get<br>
when you paste two movies together. 
</p>
<p>
&nbsp;The most efficient layout is to append the second video/sound sequence onto the first,<br>
as illustrated by the third file layout in Figure 3, so that only one buffer is needed and<br>
playback is optimized.&nbsp;&nbsp;&nbsp;When you compress with MovieShop, it automatically merges<br>
all the video and sound tracks of a movie into a single video and sound track, thus<br>
giving you the most efficient layout. 
</p>
<p>
<b>SET THE DATA RATE</b><br>
After importing a movie to compress, the first thing you do in MovieShop is to set the<br>
data rate. (See Figure 4.) To play off CD, a movie must be compressed to deliver a<br>
consistent data rate of 100 kilobytes/second or less, the effective data transfer rate of<br>
the first generation of CD-ROM drives.&nbsp;&nbsp;&nbsp;Some of the newer CD-ROM drives can now<br>
deliver twice this data rate, but you'll probably want to make your movie at 100<br>
kilobytes/second anyway, for backward compatibility. So a data rate of 100 isusually<br>
best for CD playback, while a range from 90 to 105 kilobytes/second will usually<br>
produce good results. 
</p>
<p>
<img src="img/193.gif" width="600 px"></img>
</p>
<p>
<b>&nbsp;Figure 4</b> Setting the Data Rate in MovieShop
</p>
<p class="spacer">&nbsp;</p>
<p>
<b>SET THE VIDEO SETTINGS</b><br>
Next you indicate your preferences relating to compression method, colors, and key<br>
frame spacing.&nbsp;&nbsp;&nbsp;To do so, choose Video from the Preferences menu. The dialog box<br>
shown in Figure 5 will be displayed. This is where you choose Apple Compact Video as<br>
your compression method. The Apple Compact Video compressor has been optimized for<br>
CD playback and has a built-in data rate constraining algorithm to give consistent<br>
playback from CD. Computationally, it's a highly asymmetric algorithm, taking about<br>
an hour to compress a minute of video. The results are worth it, however. 
</p>
<p>
<img src="img/194.gif" width="600 px"></img>
</p>
<p>
<b>Figure 5</b>
</p>
<p>
MovieShop tries to limit the data rate of a movie by adjusting the amount of frame<br>
differencing (motion quality) and lowering the compression quality (spatial quality).<br>
However, since the Apple Compact Video compressor determines motion and spatial<br>
quality internally, you should turn these settings off by entering the numbers shown<br>
in Figure 5. (For details about what these magic numbers mean, see the MovieShop<br>
documentation.) That way, Apple Compact Video will always make the right choices for<br>
the data rate you've chosen. 
</p>
<p>
If your source material is in color, choose "Millions of colors"; if it's in black and<br>
white, choose "256 grays." "Use previous compressed video" should be checked for<br>
most video sources; however, if you're compressing raw animations or composite<br>
movies with a constant background, uncheck this setting to get more benefit from<br>
frame differencing. MovieShop will then use the last uncompressed frame instead of<br>
the last compressed frame as the basis for frame differencing. 
</p>
<p>
The key frame setting should be related to the frame rate of your video. As I mentioned<br>
earlier, you should normally have one key frame per second, although in some cases<br>
you might want to have fewer than one per second to lower the data rate (which will,<br>
however, decrease quality as well). 
</p>
<p>
<b>SET THE SOUND SETTINGS</b><br>
To change sound settings, choose Sound from the Preferences menu. Selecting 22 kHz<br>
will ensure that your movie uses the standard Macintosh rate of 22.254 kHz. As<br>
discussed earlier, if you're not concerned about audio quality you should probably<br>
resample to 11 kHz as a tradeoff for sharper video. The Video to Sound setting lets you<br>
set how far ahead in seconds the audio is interleaved on the file from the video on the<br>
disc. This setting should normally be at 1.90, but if you find that CD playback is<br>
choppy or the audio portion breaks up, try lowering this number to 1.5. "Interleaved<br>
sound" should always be checked so that the audio and video are interleaved as<br>
explained earlier for smooth CD playback. 
</p>
<p>
<b>SCALE AND CROP THE MOVIE</b><br>
Now you need to crop the movie, since there's often tape noise and jitter on the edges of<br>
the video frames. At the same time you can scale the movie to ensure that the frame<br>
size is a multiple of 4 pixels in each dimension. (Recall that due to its algorithm, the<br>
Apple Compact Video compressor functions optimally if this is so.) To change cropping<br>
settings and scale the movie, choose Cropping from the Preferences menu. In Figure 6,<br>
the movie is being cropped by 2 pixels on all sides to eliminate noisy edges and make<br>
the output dimension values multiples of 4. 
</p>
<p>
<img src="img/195.gif" width="579 px"></img>
</p>
<p>
<b>&nbsp;Figure 6</b> MovieShop's Cropping Dialog
</p>
<p>
<b>DISABLE EXTRA COMPRESSION METHODS</b><br>
MovieShop can apply a large number of techniques when compressing a movie to get<br>
the data rate you specify. These techniques are used by the Apple Compact Video<br>
compressor, but since the compressor itself takes care of all data rate limiting, all of<br>
these methods should be turned off. To turn them off, choose Methods from the<br>
Preferences menu. Then drag item 18 to the second position in the list of methods, as<br>
shown in Figure 7. 
</p>
<p>
<img src="img/196.gif" width="600 px"></img>
</p>
<p>
<b>Figure 7</b>MovieShop's Methods Dialog
</p>
<p>
The version of MovieShop on the CD (v. 1.0c2) has a bug that causes it to use the<br>
settings for methods 2, 3, 4, and 5 even when they're below item 18. If you're<br>
working with that version, you should additionally set those methods to the following<br>
values to really disable them:<br>
2. Forced Key frame -- 255<br>
3. Natural Key frame -- 1<br>
4. Natural Key frame -- 200<br>
5. Drop duplicate frame -- 255
</p>
<p>
Again, for details about what these magic numbers mean, see the MovieShop<br>
documentation.
</p>
<p>
Once you've set up MovieShop this way, click "Make the movie," choose an output file,<br>
and sit back and watch the show. It can be a long wait, but the results will be worth it. 
</p>
<h2>TIPS ON PLAYBACK</h2>
<p>
If you're developing an application to play QuickTime movies, there are four things<br>
you can do to make movie playback everything you'd hoped it would be:
</p>
<ul>
<li>Optimize the movie's screen position and depth. </li>
<li>Avoid clipping any portion of the movie. </li>
<li>Hide the movie controller. </li>
<li> Don't call WaitNextEvent as often. </li>
</ul>
<p>
<b>OPTIMIZE SCREEN POSITION AND DEPTH</b><br>
The position of the movie on the screen can affect playback performance. For greatest<br>
efficiency, the left edge of the movie should be aligned to a long-word boundary in<br>
video memory. A new function in QuickTime 1.5 called AlignWindow moves a window to<br>
the optimal screen location for movie playback.
</p>
<p>
The screen depth also affects playback. If the screen is set to millions of colors, the<br>
movie will play back more slowly than at 256 colors, because there are more bytes to<br>
move to the screen every frame.&nbsp;&nbsp;&nbsp;The Apple Compact Video compressor is optimized<br>
for thousands of colors (16 bits/pixel), so you'll get the best performance and quality<br>
at that depth. 
</p>
<p>
<b>AVOID CLIPPING</b><br>
If any portion of the movie is clipped, playback performance will be substantially<br>
decreased because QuickTime will have to do a lot more work to draw the frames. Try<br>
to avoid overlapping windows and drawing to multiple screens. Be aware of the menu<br>
bar and the rounded corners on the edges of the Macintosh screen. Set the clipping<br>
region correctly for the movie.
</p>
<p>
<b>HIDE THE MOVIE CONTROLLER</b><br>
Displaying and updating the movie controller can cause the movie to play back more<br>
slowly, especially on low-end machines and for shorter movies, so you may want to<br>
hide it to achieve better playback. Still, it's desirable to have an option to show/hide<br>
the controller in your human interface.&nbsp;&nbsp;&nbsp;You might consider using the badge option for<br>
the movie controller to achieve this. 
</p>
<p>
<b>DON'T CALL WAITNEXTEVENT AS OFTEN</b><br>
Since QuickTime performs all its drawing operations at main event loop time, the<br>
more often you call MoviesTask the better movie playback you'll get. However, most<br>
applications call WaitNextEvent once every event loop, which can go away for a fairly<br>
long time under System 7, effectively reducing the number of times MoviesTask gets<br>
called each second. To improve this, simply call WaitNextEvent only once a second or<br>
so while movies are playing. This will allow background tasks time to run but won't<br>
interfere with foreground event processing. 
</p>
<h2>SEE YOU AT THE MOVIES!</h2>
<p>
Now you know a little bit more about making and playing movies than you did before<br>
you sat down with this article. You understand what the tradeoffs are in making<br>
CD-playable movies: to get smooth playback, you may need to limit the frame size and<br>
rate, minimize the differences between frames, and trade off audio for video quality.<br>
You know that to get the best possible quality when you capture, you need to start with<br>
a clean source, adjust levels, and grab at a larger size than you need.&nbsp;&nbsp;&nbsp;You know how to<br>
use MovieShop with the Apple Compact Video compressor to compress your movie. And<br>
you know that to get the best possible playback, you need to optimize the movie's<br>
screen position and depth, avoid clipping any portion of the movie, hide the movie<br>
controller, and not call WaitNextEvent as often. 
</p>
<p>
In a nutshell, if you want your movie to play well on a Macintosh LC II with an AppleCD<br>
SC and thousands of colors, you should use the following setup:
</p>
<ul>
<li>Frame size: 240 x 180</li>
<li>Frame rate: 12 fps</li>
<li>Sound rate: 11.127 kHz</li>
<li>Data rate: 100 kilobytes/second</li>
<li>Compressor: Apple Compact Video</li>
<li>Key frame: every 12 frames</li>
</ul>
<p>
With this knowledge, you can really put this technology to work and produce a<br>
QuickTime movie with the best of them. While you may not become the next Steven<br>
Spielberg, you can at least see your name in lights (check out the<i>QuickTime 1.5</i><br>
<i>Developer CD</i>About Box movies to see the QuickTime team in action). See you at the<br>
movies! 
</p>
<p>
<b>KIP OLSON </b>lives by the motto "I never met an avalanche I didn't like" and spends his<br>
winters skiing the extreme in places like Chamonix, Jackson Hole, and Hoboken. When<br>
not cornice surfing, he's been known to cast a #12 Adams to a rising brookie and score<br>
a perfect 18 at putt-putt golf. He works for Apple in his spare time. *
</p>
<p>
<b>For more information on QuickTime 1.5, </b>your best source is the QuickTime<br>
Developer's Kit v. 1.5, available from APDA. This kit includes the complete printed<br>
documentation for QuickTime 1.5 as well as the <i> QuickTime 1.5 Developer CD</i> , which<br>
is full of example code, movies, and utilities. The new <i> Inside Macintosh: QuickTime</i><br>
and <i>Inside Macintosh: QuickTime Components</i> together provide a complete description<br>
of QuickTime 1.5. *
</p>
<p>
<b>For more on capturing, </b>see the article "Video Digitizing Under QuickTime" in this<br>
issue. *
</p>
<p>
<b>For more information on AlignWindow </b>and other alignment routines, see the<br>
Image Compression Manager chapter of the QuickTime 1.5 Developer's Kit<br>
documentation, and <i>Inside Macintosh: QuickTime</i> .*
</p>
<p>
<b>THANKS TO OUR TECHNICAL REVIEWERS </b>Dean Blackketter, Bill Guschwan,<br>
Peter Hoddie, Eric Hoffert *
</p>
</body>
</html>
